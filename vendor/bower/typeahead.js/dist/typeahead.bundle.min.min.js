/*!
 * typeahead.js 0.10.5
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */
;!function(J){var I=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(b){return !b||/^\s*$/.test(b)},escapeRegExChars:function(b){return b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(b){return"string"==typeof b},isNumber:function(b){return"number"==typeof b},isArray:J.isArray,isFunction:J.isFunction,isObject:J.isPlainObject,isUndefined:function(b){return"undefined"==typeof b},toStr:function(b){return I.isUndefined(b)||null===b?"":b+""},bind:J.proxy,each:function(a,f){function e(d,c){return f(c,d)}J.each(a,e)},map:J.map,filter:J.grep,every:function(a,f){var e=!0;return a?(J.each(a,function(b,c){return(e=f.call(null,c,b,a))?void 0:!1}),!!e):e},some:function(a,f){var e=!1;return a?(J.each(a,function(b,c){return(e=f.call(null,c,b,a))?!1:void 0}),!!e):e},mixin:J.extend,getUniqueId:function(){var b=0;return function(){return b++}}(),templatify:function(a){function d(){return String(a)}return J.isFunction(a)?a:d},defer:function(b){setTimeout(b,0)},debounce:function(g,f,j){var i,h;return function(){var d,c,b=this,a=arguments;return d=function(){i=null,j||(h=g.apply(b,a))},c=j&&!i,clearTimeout(i),i=setTimeout(d,f),c&&(h=g.apply(b,a)),h}},throttle:function(j,i){var p,o,n,m,l,k;return l=0,k=function(){l=new Date,n=null,m=j.apply(p,o)},function(){var b=new Date,a=i-(b-l);return p=this,o=arguments,0>=a?(clearTimeout(n),n=null,l=b,m=j.apply(p,o)):n||(n=setTimeout(k,a)),m}},noop:function(){}}}(),H="0.10.5",G=function(){function b(c){return c=I.toStr(c),c?c.split(/\s+/):[]}function f(c){return c=I.toStr(c),c?c.split(/\W+/):[]}function e(c){return function(){var a=[].slice.call(arguments,0);return function(h){var g=[];return I.each(a,function(d){g=g.concat(c(I.toStr(h[d])))}),g}}}return{nonword:f,whitespace:b,obj:{nonword:e(f),whitespace:e(b)}}}(),F=function(){function f(d){this.maxSize=I.isNumber(d)?d:100,this.reset(),this.maxSize<=0&&(this.set=this.get=J.noop)}function b(){this.head=this.tail=null}function a(d,c){this.key=d,this.val=c,this.prev=this.next=null}return I.mixin(f.prototype,{set:function(g,e){var i,h=this.list.tail;this.size>=this.maxSize&&(this.list.remove(h),delete this.hash[h.key]),(i=this.hash[g])?(i.val=e,this.list.moveToFront(i)):(i=new a(g,e),this.list.add(i),this.hash[g]=i,this.size++)},get:function(d){var c=this.hash[d];return c?(this.list.moveToFront(c),c.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new b}}),I.mixin(b.prototype,{add:function(c){this.head&&(c.next=this.head,this.head.prev=c),this.head=c,this.tail=this.tail||c},remove:function(c){c.prev?c.prev.next=c.next:this.head=c.next,c.next?c.next.prev=c.prev:this.tail=c.prev},moveToFront:function(c){this.remove(c),this.add(c)}}),f}(),E=function(){function b(c){this.prefix=["__",c,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+I.escapeRegExChars(this.prefix))}function n(){return(new Date).getTime()}function m(c){return JSON.stringify(I.isUndefined(c)?null:c)}function l(c){return JSON.parse(c)}var k,j;try{k=window.localStorage,k.setItem("~~~","!"),k.removeItem("~~~")}catch(i){k=null}return j=k&&window.JSON?{_prefix:function(c){return this.prefix+c},_ttlKey:function(c){return this._prefix(c)+this.ttlKey},get:function(c){return this.isExpired(c)&&this.remove(c),l(k.getItem(this._prefix(c)))},set:function(c,f,d){return I.isNumber(d)?k.setItem(this._ttlKey(c),m(n()+d)):k.removeItem(this._ttlKey(c)),k.setItem(this._prefix(c),m(f))},remove:function(c){return k.removeItem(this._ttlKey(c)),k.removeItem(this._prefix(c)),this},clear:function(){var f,e,h=[],g=k.length;for(f=0;g>f;f++){(e=k.key(f)).match(this.keyMatcher)&&h.push(e.replace(this.keyMatcher,""))}for(f=h.length;f--;){this.remove(h[f])}return this},isExpired:function(c){var e=l(k.getItem(this._ttlKey(c)));return I.isNumber(e)&&n()>e?!0:!1}}:{get:I.noop,set:I.noop,remove:I.noop,clear:I.noop,isExpired:I.noop},I.mixin(b.prototype,j),b}(),D=function(){function l(c){c=c||{},this.cancelled=!1,this.lastUrl=null,this._send=c.transport?k(c.transport):J.ajax,this._get=c.rateLimiter?c.rateLimiter(this._get):this._get,this._cache=c.cache===!1?new F(0):a}function k(d){return function(o,n){function m(f){I.defer(function(){c.resolve(f)})}function i(f){I.defer(function(){c.reject(f)})}var c=J.Deferred();return d(o,n,m,i),c}}var j=0,e={},b=6,a=new F(10);return l.setMaxPendingRequests=function(c){b=c},l.resetCache=function(){a.reset()},I.mixin(l.prototype,{_get:function(g,f,q){function p(c){q&&q(null,c),h._cache.set(g,c)}function o(){q&&q(!0)}function n(){j--,delete e[g],h.onDeckRequestArgs&&(h._get.apply(h,h.onDeckRequestArgs),h.onDeckRequestArgs=null)}var m,h=this;this.cancelled||g!==this.lastUrl||((m=e[g])?m.done(p).fail(o):b>j?(j++,e[g]=this._send(g,f).done(p).fail(o).always(n)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(f,i,h){var g;return I.isFunction(i)&&(h=i,i={}),this.cancelled=!1,this.lastUrl=f,(g=this._cache.get(f))?I.defer(function(){h&&h(null,g)}):this._get(f,i,h),!!g},cancel:function(){this.cancelled=!0}}),l}(),C=function(){function j(c){c=c||{},c.datumTokenizer&&c.queryTokenizer||J.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=c.datumTokenizer,this.queryTokenizer=c.queryTokenizer,this.reset()}function i(c){return c=I.filter(c,function(d){return !!d}),c=I.map(c,function(d){return d.toLowerCase()})}function h(){return{ids:[],children:{}}}function b(g){for(var f={},m=[],l=0,k=g.length;k>l;l++){f[g[l]]||(f[g[l]]=!0,m.push(g[l]))}return m}function a(l,k){function r(d,c){return d-c}var q=0,p=0,o=[];l=l.sort(r),k=k.sort(r);for(var n=l.length,m=k.length;n>q&&m>p;){l[q]<k[p]?q++:l[q]>k[p]?p++:(o.push(l[q]),q++,p++)}return o}return I.mixin(j.prototype,{bootstrap:function(c){this.datums=c.datums,this.trie=c.trie},add:function(d){var e=this;d=I.isArray(d)?d:[d],I.each(d,function(c){var l,k;l=e.datums.push(c)-1,k=i(e.datumTokenizer(c)),I.each(k,function(m){var f,o,n;for(f=e.trie,o=m.split("");n=o.shift();){f=f.children[n]||(f.children[n]=h()),f.ids.push(l)}})})},get:function(d){var k,g,f=this;return k=i(this.queryTokenizer(d)),I.each(k,function(l){var e,o,n,m;if(g&&0===g.length){return !1}for(e=f.trie,o=l.split("");e&&(n=o.shift());){e=e.children[n]}return e&&0===o.length?(m=e.ids.slice(0),void (g=g?a(g,m):m)):(g=[],!1)}),g?I.map(b(g),function(c){return f.datums[c]}):[]},reset:function(){this.datums=[],this.trie=h()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),j}(),B=function(){function c(d){return d.local||null}function b(i){var h,g;return g={url:null,thumbprint:"",ttl:86400000,filter:null,ajax:{}},(h=i.prefetch||null)&&(h=I.isString(h)?{url:h}:h,h=I.mixin(g,h),h.thumbprint=H+h.thumbprint,h.ajax.type=h.ajax.type||"GET",h.ajax.dataType=h.ajax.dataType||"json",!h.url&&J.error("prefetch requires url to be set")),h}function a(l){function k(d){return function(e){return I.debounce(e,d)}}function j(d){return function(e){return I.throttle(e,d)}}var i,h;return h={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(i=l.remote||null)&&(i=I.isString(i)?{url:i}:i,i=I.mixin(h,i),i.rateLimiter=/^throttle$/i.test(i.rateLimitBy)?j(i.rateLimitWait):k(i.rateLimitWait),i.ajax.type=i.ajax.type||"GET",i.ajax.dataType=i.ajax.dataType||"json",delete i.rateLimitBy,delete i.rateLimitWait,!i.url&&J.error("remote requires url to be set")),i}return{local:c,prefetch:b,remote:a}}();!function(h){function g(c){c&&(c.local||c.prefetch||c.remote)||J.error("one of local, prefetch, or remote is required"),this.limit=c.limit||5,this.sorter=f(c.sorter),this.dupDetector=c.dupDetector||d,this.local=B.local(c),this.prefetch=B.prefetch(c),this.remote=B.remote(c),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new C({datumTokenizer:c.datumTokenizer,queryTokenizer:c.queryTokenizer}),this.storage=this.cacheKey?new E(this.cacheKey):null}function f(e){function j(c){return c.sort(e)}function i(c){return c}return I.isFunction(e)?j:i}function d(){return !1}var b,a;return b=h.Bloodhound,a={data:"data",protocol:"protocol",thumbprint:"thumbprint"},h.Bloodhound=g,g.noConflict=function(){return h.Bloodhound=b,g},g.tokenizers=G,I.mixin(g.prototype,{_loadPrefetch:function(i){function m(c){j.clear(),j.add(i.filter?i.filter(c):c),j._saveToStorage(j.index.serialize(),i.thumbprint,i.ttl)}var l,k,j=this;return(l=this._readFromStorage(i.thumbprint))?(this.index.bootstrap(l),k=J.Deferred().resolve()):k=J.ajax(i.url,i.ajax).done(m),k},_getFromRemote:function(j,i){function n(e,o){i(e?[]:k.remote.filter?k.remote.filter(o):o)}var m,l,k=this;if(this.transport){return j=j||"",l=encodeURIComponent(j),m=this.remote.replace?this.remote.replace(this.remote.url,j):this.remote.url.replace(this.remote.wildcard,l),this.transport.get(m,this.remote.ajax,n)}},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(i,e,j){this.storage&&(this.storage.set(a.data,i,j),this.storage.set(a.protocol,location.protocol,j),this.storage.set(a.thumbprint,e,j))},_readFromStorage:function(i){var e,j={};return this.storage&&(j.data=this.storage.get(a.data),j.protocol=this.storage.get(a.protocol),j.thumbprint=this.storage.get(a.thumbprint)),e=j.thumbprint!==i||j.protocol!==location.protocol,j.data&&!e?j.data:null},_initialize:function(){function l(){j.add(I.isFunction(i)?i():i)}var k,j=this,i=this.local;return k=this.prefetch?this._loadPrefetch(this.prefetch):J.Deferred().resolve(),i&&k.done(l),this.transport=this.remote?new D(this.remote):null,this.initPromise=k.promise()},initialize:function(c){return !this.initPromise||c?this._initialize():this.initPromise},add:function(c){this.index.add(c)},get:function(i,n){function m(c){var e=k.slice(0);I.each(c,function(o){var p;return p=I.some(e,function(q){return l.dupDetector(o,q)}),!p&&e.push(o),e.length<l.limit}),n&&n(l.sorter(e))}var l=this,k=[],j=!1;k=this.index.get(i),k=this.sorter(k).slice(0,this.limit),k.length<this.limit?j=this._getFromRemote(i,m):this._cancelLastRemoteRequest(),j||(k.length>0||!this.transport)&&n&&n(k)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&D.resetCache()},ttAdapter:function(){return I.bind(this.get,this)}}),g}(this);var A=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),z=function(){var b={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return I.isMsie()&&I.mixin(b.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),I.isMsie()&&I.isMsie()<=7&&I.mixin(b.input,{marginTop:"-1px"}),b}(),y=function(){function b(c){c&&c.el||J.error("EventBus initialized without el"),this.$el=J(c.el)}var a="typeahead:";return I.mixin(b.prototype,{trigger:function(d){var c=[].slice.call(arguments,1);this.$el.trigger(a+d,c)}}),b}(),x=function(){function L(g,f,j,i){var h;if(!j){return this}for(f=f.split(l),j=i?m(j,i):j,this._callbacks=this._callbacks||{};h=f.shift();){this._callbacks[h]=this._callbacks[h]||{sync:[],async:[]},this._callbacks[h][g].push(j)}return this}function K(a,f,e){return L.call(this,"async",a,f,e)}function r(a,f,e){return L.call(this,"sync",a,f,e)}function q(d){var c;if(!this._callbacks){return this}for(d=d.split(l);c=d.shift();){delete this._callbacks[c]}return this}function p(h){var f,N,M,j,i;if(!this._callbacks){return this}for(h=h.split(l),M=[].slice.call(arguments,1);(f=h.shift())&&(N=this._callbacks[f]);){j=o(N.sync,this,[f].concat(M)),i=o(N.async,this,[f].concat(M)),j()&&k(i)}return this}function o(f,e,h){function g(){for(var c,b=0,a=f.length;!c&&a>b;b+=1){c=f[b].apply(e,h)===!1}return !c}return g}function n(){var b;return b=window.setImmediate?function(c){setImmediate(function(){c()})}:function(c){setTimeout(function(){c()},0)}}function m(d,c){return d.bind?d.bind(c):function(){d.apply(c,[].slice.call(arguments,0))}}var l=/\s+/,k=n();return{onSync:r,onAsync:K,off:q,trigger:p}}(),w=function(b){function f(i,o,n){for(var m,l=[],k=0,j=i.length;j>k;k++){l.push(I.escapeRegExChars(i[k]))}return m=n?"\\b("+l.join("|")+")\\b":"("+l.join("|")+")",o?new RegExp(m):new RegExp(m,"i")}var e={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(i){function d(g){var k,j,h;return(k=a.exec(g.data))&&(h=b.createElement(i.tagName),i.className&&(h.className=i.className),j=g.splitText(k.index),j.splitText(k[0].length),h.appendChild(j.cloneNode(!0)),g.parentNode.replaceChild(h,j)),!!k}function c(h,g){for(var l,k=3,j=0;j<h.childNodes.length;j++){l=h.childNodes[j],l.nodeType===k?j+=g(l)?1:0:c(l,g)}}var a;i=I.mixin({},e,i),i.node&&i.pattern&&(i.pattern=I.isArray(i.pattern)?i.pattern:[i.pattern],a=f(i.pattern,i.caseSensitive,i.wordsOnly),c(i.node,d))}}(window.document),v=function(){function j(n){var m,l,k,g,d=this;n=n||{},n.input||J.error("input is missing"),m=I.bind(this._onBlur,this),l=I.bind(this._onFocus,this),k=I.bind(this._onKeydown,this),g=I.bind(this._onInput,this),this.$hint=J(n.hint),this.$input=J(n.input).on("blur.tt",m).on("focus.tt",l).on("keydown.tt",k),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=I.noop),I.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(c){a[c.which||c.keyCode]||I.defer(I.bind(d._onInput,d,c))}):this.$input.on("input.tt",g),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(c){return J('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:c.css("font-family"),fontSize:c.css("font-size"),fontStyle:c.css("font-style"),fontVariant:c.css("font-variant"),fontWeight:c.css("font-weight"),wordSpacing:c.css("word-spacing"),letterSpacing:c.css("letter-spacing"),textIndent:c.css("text-indent"),textRendering:c.css("text-rendering"),textTransform:c.css("text-transform")}).insertAfter(c)}function h(d,c){return j.normalizeQuery(d)===j.normalizeQuery(c)}function b(c){return c.altKey||c.ctrlKey||c.metaKey||c.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},j.normalizeQuery=function(c){return(c||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},I.mixin(j.prototype,x,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(d){var c=a[d.which||d.keyCode];this._managePreventDefault(c,d),c&&this._shouldTrigger(c,d)&&this.trigger(c+"Keyed",d)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(g,f){var m,l,k;switch(g){case"tab":l=this.getHint(),k=this.getInputValue(),m=l&&l!==k&&!b(f);break;case"up":case"down":m=!b(f);break;default:m=!1}m&&f.preventDefault()},_shouldTrigger:function(e,d){var f;switch(e){case"tab":f=!b(d);break;default:f=!0}return f},_checkInputValue:function(){var e,d,f;e=this.getInputValue(),d=h(e,this.query),f=d?this.query.length!==e.length:!1,this.query=e,d?f&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(c){this.query=c},getInputValue:function(){return this.$input.val()},setInputValue:function(d,c){this.$input.val(d),c?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(c){this.$hint.val(c)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var f,e,k,g;f=this.getInputValue(),e=this.getHint(),k=f!==e&&0===e.indexOf(f),g=""!==f&&k&&!this.hasOverflow(),!g&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var c=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=c},isCursorAtEnd:function(){var e,g,f;return e=this.$input.val().length,g=this.$input[0].selectionStart,I.isNumber(g)?g===e:document.selection?(f=document.selection.createRange(),f.moveStart("character",-e),e===f.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),j}(),u=function(){function n(d){d=d||{},d.templates=d.templates||{},d.source||J.error("missing source"),d.name&&!k(d.name)&&J.error("invalid dataset name: "+d.name),this.query=null,this.highlight=!!d.highlight,this.name=d.name||I.getUniqueId(),this.source=d.source,this.displayFn=m(d.display||d.displayKey),this.templates=l(d.templates,this.displayFn),this.$el=J(A.dataset.replace("%CLASS%",this.name))}function m(d){function e(c){return c[d]}return d=d||"value",I.isFunction(d)?d:e}function l(e,g){function f(c){return"<p>"+g(c)+"</p>"}return{empty:e.empty&&I.templatify(e.empty),header:e.header&&I.templatify(e.header),footer:e.footer&&I.templatify(e.footer),suggestion:e.suggestion||f}}function k(c){return/^[_a-zA-Z0-9-]+$/.test(c)}var j="ttDataset",b="ttValue",a="ttDatum";return n.extractDatasetName=function(c){return J(c).data(j)},n.extractValue=function(c){return J(c).data(b)},n.extractDatum=function(c){return J(c).data(a)},I.mixin(n.prototype,x,{_render:function(M,L){function r(){return q.templates.empty({query:M,isEmpty:!0})}function i(){function o(e){var f;return f=J(A.suggestion).append(q.templates.suggestion(e)).data(j,q.name).data(b,q.displayFn(e)).data(a,e),f.children().each(function(){J(this).css(z.suggestionChild)}),f}var d,c;return d=J(A.suggestions).css(z.suggestions),c=I.map(L,o),d.append.apply(d,c),q.highlight&&w({className:"tt-highlight",node:d[0],pattern:M}),d}function h(){return q.templates.header({query:M,isEmpty:!K})}function g(){return q.templates.footer({query:M,isEmpty:!K})}if(this.$el){var K,q=this;this.$el.empty(),K=L&&L.length,!K&&this.templates.empty?this.$el.html(r()).prepend(q.templates.header?h():null).append(q.templates.footer?g():null):K&&this.$el.html(i()).prepend(q.templates.header?h():null).append(q.templates.footer?g():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function d(c){f.canceled||e!==f.query||f._render(e,c)}var f=this;this.query=e,this.canceled=!1,this.source(e,d)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),n}(),t=function(){function b(l){var k,j,i,d=this;l=l||{},l.menu||J.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=I.map(l.datasets,a),k=I.bind(this._onSuggestionClick,this),j=I.bind(this._onSuggestionMouseEnter,this),i=I.bind(this._onSuggestionMouseLeave,this),this.$menu=J(l.menu).on("click.tt",".tt-suggestion",k).on("mouseenter.tt",".tt-suggestion",j).on("mouseleave.tt",".tt-suggestion",i),I.each(this.datasets,function(c){d.$menu.append(c.getRoot()),c.onSync("rendered",d._onRendered,d)})}function a(c){return new u(c)}return I.mixin(b.prototype,x,{_onSuggestionClick:function(c){this.trigger("suggestionClicked",J(c.currentTarget))},_onSuggestionMouseEnter:function(c){this._removeCursor(),this._setCursor(J(c.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function c(d){return d.isEmpty()}this.isEmpty=I.every(this.datasets,c),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(d,c){d.first().addClass("tt-cursor"),!c&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(g){var f,j,i,h;if(this.isOpen){if(j=this._getCursor(),f=this._getSuggestions(),this._removeCursor(),i=f.index(j)+g,i=(i+1)%(f.length+1)-1,-1===i){return void this.trigger("cursorRemoved")}-1>i&&(i=f.length-1),this._setCursor(h=f.eq(i)),this._ensureVisible(h)}},_ensureVisible:function(g){var f,j,i,h;f=g.position().top,j=f+g.outerHeight(!0),i=this.$menu.scrollTop(),h=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>f?this.$menu.scrollTop(i+f):j>h&&this.$menu.scrollTop(i+(j-h))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(c){this.$menu.css("ltr"===c?z.ltr:z.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(d){var c=null;return d.length&&(c={raw:u.extractDatum(d),value:u.extractValue(d),datasetName:u.extractDatasetName(d)}),c},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(d){function e(c){c.update(d)}I.each(this.datasets,e)},empty:function(){function c(d){d.clear()}I.each(this.datasets,c),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function c(d){d.destroy()}this.$menu.off(".tt"),this.$menu=null,I.each(this.datasets,c)}}),b}(),s=function(){function j(m){var l,k,d;m=m||{},m.input||J.error("missing input"),this.isActivated=!1,this.autoselect=!!m.autoselect,this.minLength=I.isNumber(m.minLength)?m.minLength:1,this.$node=i(m.input,m.withHint),l=this.$node.find(".tt-dropdown-menu"),k=this.$node.find(".tt-input"),d=this.$node.find(".tt-hint"),k.on("blur.tt",function(e){var o,n,f;o=document.activeElement,n=l.is(o),f=l.has(o).length>0,I.isMsie()&&(n||f)&&(e.preventDefault(),e.stopImmediatePropagation(),I.defer(function(){k.focus()}))}),l.on("mousedown.tt",function(c){c.preventDefault()}),this.eventBus=m.eventBus||new y({el:k}),this.dropdown=new t({menu:l,datasets:m.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new v({input:k,hint:d}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function i(e,p){var o,n,m,k;o=J(e),n=J(A.wrapper).css(z.wrapper),m=J(A.dropdown).css(z.dropdown),k=o.clone().css(z.hint).css(h(o)),k.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),o.data(a,{dir:o.attr("dir"),autocomplete:o.attr("autocomplete"),spellcheck:o.attr("spellcheck"),style:o.attr("style")}),o.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(p?z.input:z.inputWithNoHint);try{!o.attr("dir")&&o.attr("dir","auto")}catch(g){}return o.wrap(n).parent().prepend(p?k:null).append(m)}function h(c){return{backgroundAttachment:c.css("background-attachment"),backgroundClip:c.css("background-clip"),backgroundColor:c.css("background-color"),backgroundImage:c.css("background-image"),backgroundOrigin:c.css("background-origin"),backgroundPosition:c.css("background-position"),backgroundRepeat:c.css("background-repeat"),backgroundSize:c.css("background-size")}}function b(d){var e=d.find(".tt-input");I.each(e.data(a),function(c,f){I.isUndefined(c)?e.removeAttr(f):e.attr(f,c)}),e.detach().removeData(a).removeClass("tt-input").insertAfter(d),d.remove()}var a="ttAttrs";return I.mixin(j.prototype,{_onSuggestionClicked:function(e,d){var f;(f=this.dropdown.getDatumForSuggestion(d))&&this._select(f)},_onCursorMoved:function(){var c=this.dropdown.getDatumForCursor();this.input.setInputValue(c.value,!0),this.eventBus.trigger("cursorchanged",c.raw,c.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(f,e){var k,g;k=this.dropdown.getDatumForCursor(),g=this.dropdown.getDatumForTopSuggestion(),k?(this._select(k),e.preventDefault()):this.autoselect&&g&&(this._select(g),e.preventDefault())},_onTabKeyed:function(e,d){var f;(f=this.dropdown.getDatumForCursor())?(this._select(f),d.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var c=this.input.getQuery();this.dropdown.isEmpty&&c.length>=this.minLength?this.dropdown.update(c):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var c=this.input.getQuery();this.dropdown.isEmpty&&c.length>=this.minLength?this.dropdown.update(c):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(d,c){this.input.clearHintIfInvalid(),c.length>=this.minLength?this.dropdown.update(c):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var c;this.dir!==(c=this.input.getLanguageDirection())&&(this.dir=c,this.$node.css("direction",c),this.dropdown.setLanguageDirection(c))},_updateHint:function(){var k,p,o,n,m,l;k=this.dropdown.getDatumForTopSuggestion(),k&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(p=this.input.getInputValue(),o=v.normalizeQuery(p),n=I.escapeRegExChars(o),m=new RegExp("^(?:"+n+")(.+$)","i"),l=m.exec(k.value),l?this.input.setHint(p+l[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(g){var f,m,l,k;f=this.input.getHint(),m=this.input.getQuery(),l=g||this.input.isCursorAtEnd(),f&&m!==f&&l&&(k=this.dropdown.getDatumForTopSuggestion(),k&&this.input.setInputValue(k.value),this.eventBus.trigger("autocompleted",k.raw,k.datasetName))},_select:function(c){this.input.setQuery(c.value),this.input.setInputValue(c.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",c.raw,c.datasetName),this.dropdown.close(),I.defer(I.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(c){c=I.toStr(c),this.isActivated?this.input.setInputValue(c):(this.input.setQuery(c),this.input.setInputValue(c,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),b(this.$node),this.$node=null}}),j}();!function(){var f,b,a;f=J.fn.typeahead,b="ttTypeahead",a={initialize:function(h,g){function d(){var i,e,c=J(this);I.each(g,function(j){j.highlight=!!h.highlight}),e=new s({input:c,eventBus:i=new y({el:c}),withHint:I.isUndefined(h.hint)?!0:!!h.hint,minLength:h.minLength,autoselect:h.autoselect,datasets:g}),c.data(b,e)}return g=I.isArray(g)?g:[].slice.call(arguments,1),h=h||{},this.each(d)},open:function(){function c(){var d,e=J(this);(d=e.data(b))&&d.open()}return this.each(c)},close:function(){function c(){var d,e=J(this);(d=e.data(b))&&d.close()}return this.each(c)},val:function(d){function h(){var j,i=J(this);(j=i.data(b))&&j.setVal(d)}function g(i){var e,j;return(e=i.data(b))&&(j=e.getVal()),j}return arguments.length?this.each(h):g(this.first())},destroy:function(){function c(){var d,e=J(this);(d=e.data(b))&&(d.destroy(),e.removeData(b))}return this.each(c)}},J.fn.typeahead=function(d){var e;return a[d]&&"initialize"!==d?(e=this.filter(function(){return !!J(this).data(b)}),a[d].apply(e,[].slice.call(arguments,1))):a.initialize.apply(this,arguments)},J.fn.typeahead.noConflict=function(){return J.fn.typeahead=f,this}}()}(window.jQuery);