/*!
 * typeahead.js 0.10.5
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(c){var g=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(l){return !l||/^\s*$/.test(l)},escapeRegExChars:function(l){return l.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(l){return typeof l==="string"},isNumber:function(l){return typeof l==="number"},isArray:c.isArray,isFunction:c.isFunction,isObject:c.isPlainObject,isUndefined:function(l){return typeof l==="undefined"},toStr:function k(l){return g.isUndefined(l)||l===null?"":l+""},bind:c.proxy,each:function(n,l){c.each(n,m);function m(o,p){return l(p,o)}},map:c.map,filter:c.grep,every:function(m,n){var l=true;if(!m){return l}c.each(m,function(o,p){if(!(l=n.call(null,p,o,m))){return false}});return !!l},some:function(m,n){var l=false;if(!m){return l}c.each(m,function(o,p){if(l=n.call(null,p,o,m)){return false}});return !!l},mixin:c.extend,getUniqueId:function(){var l=0;return function(){return l++}}(),templatify:function j(m){return c.isFunction(m)?m:l;function l(){return String(m)}},defer:function(l){setTimeout(l,0)},debounce:function(n,p,m){var o,l;return function(){var t=this,s=arguments,r,q;r=function(){o=null;if(!m){l=n.apply(t,s)}};q=m&&!o;clearTimeout(o);o=setTimeout(r,p);if(q){l=n.apply(t,s)}return l}},throttle:function(q,s){var o,n,r,l,p,m;p=0;m=function(){p=new Date();r=null;l=q.apply(o,n)};return function(){var t=new Date(),u=s-(t-p);o=this;n=arguments;if(u<=0){clearTimeout(r);r=null;p=t;l=q.apply(o,n)}else{if(!r){r=setTimeout(m,u)}}return l}},noop:function(){}}}();var i="0.10.5";var e=function(){return{nonword:j,whitespace:k,obj:{nonword:l(j),whitespace:l(k)}};function k(m){m=g.toStr(m);return m?m.split(/\s+/):[]}function j(m){m=g.toStr(m);return m?m.split(/\W+/):[]}function l(n){return function m(){var o=[].slice.call(arguments,0);return function p(r){var q=[];g.each(o,function(s){q=q.concat(n(g.toStr(r[s])))});return q}}}}();var h=function(){function k(r){this.maxSize=g.isNumber(r)?r:100;this.reset();if(this.maxSize<=0){this.set=this.get=c.noop}}g.mixin(k.prototype,{set:function q(r,u){var t=this.list.tail,s;if(this.size>=this.maxSize){this.list.remove(t);delete this.hash[t.key]}if(s=this.hash[r]){s.val=u;this.list.moveToFront(s)}else{s=new l(r,u);this.list.add(s);this.hash[r]=s;this.size++}},get:function m(r){var s=this.hash[r];if(s){this.list.moveToFront(s);return s.val}},reset:function o(){this.size=0;this.hash={};this.list=new n()}});function n(){this.head=this.tail=null}g.mixin(n.prototype,{add:function p(r){if(this.head){r.next=this.head;this.head.prev=r}this.head=r;this.tail=this.tail||r},remove:function j(r){r.prev?r.prev.next=r.next:this.head=r.next;r.next?r.next.prev=r.prev:this.tail=r.prev},moveToFront:function(r){this.remove(r);this.add(r)}});function l(r,s){this.key=r;this.val=s;this.prev=this.next=null}return k}();var f=function(){var j,k;try{j=window.localStorage;j.setItem("~~~","!");j.removeItem("~~~")}catch(o){j=null}function m(q){this.prefix=["__",q,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+g.escapeRegExChars(this.prefix))}if(j&&window.JSON){k={_prefix:function(q){return this.prefix+q},_ttlKey:function(q){return this._prefix(q)+this.ttlKey},get:function(q){if(this.isExpired(q)){this.remove(q)}return p(j.getItem(this._prefix(q)))},set:function(r,s,q){if(g.isNumber(q)){j.setItem(this._ttlKey(r),n(l()+q))}else{j.removeItem(this._ttlKey(r))}return j.setItem(this._prefix(r),n(s))},remove:function(q){j.removeItem(this._ttlKey(q));j.removeItem(this._prefix(q));return this},clear:function(){var s,r,t=[],q=j.length;for(s=0;s<q;s++){if((r=j.key(s)).match(this.keyMatcher)){t.push(r.replace(this.keyMatcher,""))}}for(s=t.length;s--;){this.remove(t[s])}return this},isExpired:function(r){var q=p(j.getItem(this._ttlKey(r)));return g.isNumber(q)&&l()>q?true:false}}}else{k={get:g.noop,set:g.noop,remove:g.noop,clear:g.noop,isExpired:g.noop}}g.mixin(m.prototype,k);return m;function l(){return new Date().getTime()}function n(q){return JSON.stringify(g.isUndefined(q)?null:q)}function p(q){return JSON.parse(q)}}();var d=function(){var l=0,n={},j=6,m=new h(10);function q(r){r=r||{};this.cancelled=false;this.lastUrl=null;this._send=r.transport?o(r.transport):c.ajax;this._get=r.rateLimiter?r.rateLimiter(this._get):this._get;this._cache=r.cache===false?new h(0):m}q.setMaxPendingRequests=function k(r){j=r};q.resetCache=function p(){m.reset()};g.mixin(q.prototype,{_get:function(v,y,s){var x=this,w;if(this.cancelled||v!==this.lastUrl){return}if(w=n[v]){w.done(u).fail(t)}else{if(l<j){l++;n[v]=this._send(v,y).done(u).fail(t).always(r)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}}function u(z){s&&s(null,z);x._cache.set(v,z)}function t(){s&&s(true)}function r(){l--;delete n[v];if(x.onDeckRequestArgs){x._get.apply(x,x.onDeckRequestArgs);x.onDeckRequestArgs=null}}},get:function(s,u,r){var t;if(g.isFunction(u)){r=u;u={}}this.cancelled=false;this.lastUrl=s;if(t=this._cache.get(s)){g.defer(function(){r&&r(null,t)})}else{this._get(s,u,r)}return !!t},cancel:function(){this.cancelled=true}});return q;function o(r){return function s(u,x){var t=c.Deferred();r(u,x,w,v);return t;function w(y){g.defer(function(){t.resolve(y)})}function v(y){g.defer(function(){t.reject(y)})}}}}();var a=function(){function j(s){s=s||{};if(!s.datumTokenizer||!s.queryTokenizer){c.error("datumTokenizer and queryTokenizer are both required")}this.datumTokenizer=s.datumTokenizer;this.queryTokenizer=s.queryTokenizer;this.reset()}g.mixin(j.prototype,{bootstrap:function l(s){this.datums=s.datums;this.trie=s.trie},add:function(t){var s=this;t=g.isArray(t)?t:[t];g.each(t,function(u){var w,v;w=s.datums.push(u)-1;v=n(s.datumTokenizer(u));g.each(v,function(x){var A,z,y;A=s.trie;z=x.split("");while(y=z.shift()){A=A.children[y]||(A.children[y]=q());A.ids.push(w)}})})},get:function k(u){var s=this,v,t;v=n(this.queryTokenizer(u));g.each(v,function(w){var A,z,y,x;if(t&&t.length===0){return false}A=s.trie;z=w.split("");while(A&&(y=z.shift())){A=A.children[y]}if(A&&z.length===0){x=A.ids.slice(0);t=t?o(t,x):x}else{t=[];return false}});return t?g.map(m(t),function(w){return s.datums[w]}):[]},reset:function p(){this.datums=[];this.trie=q()},serialize:function r(){return{datums:this.datums,trie:this.trie}}});return j;function n(s){s=g.filter(s,function(t){return !!t});s=g.map(s,function(t){return t.toLowerCase()});return s}function q(){return{ids:[],children:{}}}function m(w){var t={},v=[];for(var u=0,s=w.length;u<s;u++){if(!t[w[u]]){t[w[u]]=true;v.push(w[u])}}return v}function o(x,v){var t=0,w=0,z=[];x=x.sort(y);v=v.sort(y);var u=x.length,s=v.length;while(t<u&&w<s){if(x[t]<v[w]){t++}else{if(x[t]>v[w]){w++}else{z.push(x[t]);t++;w++}}}return z;function y(B,A){return B-A}}}();var b=function(){return{local:l,prefetch:j,remote:k};function l(m){return m.local||null}function j(p){var n,m;m={url:null,thumbprint:"",ttl:24*60*60*1000,filter:null,ajax:{}};if(n=p.prefetch||null){n=g.isString(n)?{url:n}:n;n=g.mixin(m,n);n.thumbprint=i+n.thumbprint;n.ajax.type=n.ajax.type||"GET";n.ajax.dataType=n.ajax.dataType||"json";!n.url&&c.error("prefetch requires url to be set")}return n}function k(r){var p,q;q={url:null,cache:true,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(p=r.remote||null){p=g.isString(p)?{url:p}:p;p=g.mixin(q,p);p.rateLimiter=/^throttle$/i.test(p.rateLimitBy)?n(p.rateLimitWait):m(p.rateLimitWait);p.ajax.type=p.ajax.type||"GET";p.ajax.dataType=p.ajax.dataType||"json";delete p.rateLimitBy;delete p.rateLimitWait;!p.url&&c.error("remote requires url to be set")}return p;function m(o){return function(s){return g.debounce(s,o)}}function n(o){return function(s){return g.throttle(s,o)}}}}();(function(u){var j,p;j=u.Bloodhound;p={data:"data",protocol:"protocol",thumbprint:"thumbprint"};u.Bloodhound=l;function l(C){if(!C||!C.local&&!C.prefetch&&!C.remote){c.error("one of local, prefetch, or remote is required")}this.limit=C.limit||5;this.sorter=s(C.sorter);this.dupDetector=C.dupDetector||r;this.local=b.local(C);this.prefetch=b.prefetch(C);this.remote=b.remote(C);this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null;this.index=new a({datumTokenizer:C.datumTokenizer,queryTokenizer:C.queryTokenizer});this.storage=this.cacheKey?new f(this.cacheKey):null}l.noConflict=function B(){u.Bloodhound=j;return l};l.tokenizers=e;g.mixin(l.prototype,{_loadPrefetch:function m(G){var D=this,F,C;if(F=this._readFromStorage(G.thumbprint)){this.index.bootstrap(F);C=c.Deferred().resolve()}else{C=c.ajax(G.url,G.ajax).done(E)}return C;function E(H){D.clear();D.add(G.filter?G.filter(H):H);D._saveToStorage(D.index.serialize(),G.thumbprint,G.ttl)}},_getFromRemote:function o(H,C){var G=this,E,F;if(!this.transport){return}H=H||"";F=encodeURIComponent(H);E=this.remote.replace?this.remote.replace(this.remote.url,H):this.remote.url.replace(this.remote.wildcard,F);return this.transport.get(E,this.remote.ajax,D);function D(I,J){I?C([]):C(G.remote.filter?G.remote.filter(J):J)}},_cancelLastRemoteRequest:function A(){this.transport&&this.transport.cancel()},_saveToStorage:function v(E,D,C){if(this.storage){this.storage.set(p.data,E,C);this.storage.set(p.protocol,location.protocol,C);this.storage.set(p.thumbprint,D,C)}},_readFromStorage:function z(D){var C={},E;if(this.storage){C.data=this.storage.get(p.data);C.protocol=this.storage.get(p.protocol);C.thumbprint=this.storage.get(p.thumbprint)}E=C.thumbprint!==D||C.protocol!==location.protocol;return C.data&&!E?C.data:null},_initialize:function k(){var F=this,E=this.local,C;C=this.prefetch?this._loadPrefetch(this.prefetch):c.Deferred().resolve();E&&C.done(D);this.transport=this.remote?new d(this.remote):null;return this.initPromise=C.promise();function D(){F.add(g.isFunction(E)?E():E)}},initialize:function k(C){return !this.initPromise||C?this._initialize():this.initPromise},add:function q(C){this.index.add(C)},get:function x(G,C){var E=this,F=[],D=false;F=this.index.get(G);F=this.sorter(F).slice(0,this.limit);F.length<this.limit?D=this._getFromRemote(G,H):this._cancelLastRemoteRequest();if(!D){(F.length>0||!this.transport)&&C&&C(F)}function H(J){var I=F.slice(0);g.each(J,function(L){var K;K=g.some(I,function(M){return E.dupDetector(L,M)});!K&&I.push(L);return I.length<E.limit});C&&C(E.sorter(I))}},clear:function t(){this.index.reset()},clearPrefetchCache:function n(){this.storage&&this.storage.clear()},clearRemoteCache:function w(){this.transport&&d.resetCache()},ttAdapter:function y(){return g.bind(this.get,this)}});return l;function s(D){return g.isFunction(D)?C:E;function C(F){return F.sort(D)}function E(F){return F}}function r(){return false}})(this)})(window.jQuery);