var EventEmitter=(function(){var c=/\s+/,g=a();return{onSync:h,onAsync:b,off:d,trigger:e};function i(o,m,k,l){var n;if(!k){return this}m=m.split(c);k=l?j(k,l):k;this._callbacks=this._callbacks||{};while(n=m.shift()){this._callbacks[n]=this._callbacks[n]||{sync:[],async:[]};this._callbacks[n][o].push(k)}return this}function b(m,k,l){return i.call(this,"async",m,k,l)}function h(m,k,l){return i.call(this,"sync",m,k,l)}function d(k){var l;if(!this._callbacks){return this}k=k.split(c);while(l=k.shift()){delete this._callbacks[l]}return this}function e(l){var m,n,k,o,p;if(!this._callbacks){return this}l=l.split(c);k=[].slice.call(arguments,1);while((m=l.shift())&&(n=this._callbacks[m])){o=f(n.sync,this,[m].concat(k));p=f(n.async,this,[m].concat(k));o()&&g(p)}return this}function f(n,m,l){return k;function k(){var q;for(var p=0,o=n.length;!q&&p<o;p+=1){q=n[p].apply(m,l)===false}return !q}}function a(){var l;if(window.setImmediate){l=function m(n){setImmediate(function(){n()})}}else{l=function k(n){setTimeout(function(){n()},0)}}return l}function j(l,k){return l.bind?l.bind(k):function(){l.apply(k,[].slice.call(arguments,0))}}})();