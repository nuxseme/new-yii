(function(c){c.fn.yiiGridView=function(f){if(a[f]){return a[f].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof f==="object"||!f){return a.init.apply(this,arguments)}else{c.error("Method "+f+" does not exist on jQuery.yiiGridView");return false}}};var d={filterUrl:undefined,filterSelector:undefined};var b={};var e={beforeFilter:"beforeFilter",afterFilter:"afterFilter"};var a={init:function(f){return this.each(function(){var h=c(this);var i=c.extend({},d,f||{});b[h.attr("id")]={settings:i};var g=false;c(document).off("change.yiiGridView keydown.yiiGridView",i.filterSelector).on("change.yiiGridView keydown.yiiGridView",i.filterSelector,function(j){if(j.type==="keydown"){if(j.keyCode!==13){return}else{g=true}}else{if(g){g=false;return}}a.applyFilter.apply(h);return false})})},applyFilter:function(){var f=c(this),j;var i=b[f.attr("id")].settings;var k={};c.each(c(i.filterSelector).serializeArray(),function(){k[this.name]=this.value});c.each(yii.getQueryParams(i.filterUrl),function(m,n){if(k[m]===undefined){k[m]=n}});var l=i.filterUrl.indexOf("?");var h=l<0?i.filterUrl:i.filterUrl.substring(0,l);f.find("form.gridview-filter-form").remove();var g=c('<form action="'+h+'" method="get" class="gridview-filter-form" style="display:none" data-pjax></form>').appendTo(f);c.each(k,function(m,n){g.append(c('<input type="hidden" name="t" value="" />').attr("name",m).val(n))});j=c.Event(e.beforeFilter);f.trigger(j);if(j.result===false){return}g.submit();f.trigger(e.afterFilter)},setSelectionColumn:function(i){var f=c(this);var j=c(this).attr("id");b[j].selectionColumn=i.name;if(!i.multiple){return}var h="#"+j+" input[name='"+i.checkAll+"']";var g="#"+j+" input[name='"+i.name+"']";c(document).off("click.yiiGridView",h).on("click.yiiGridView",h,function(){f.find("input[name='"+i.name+"']:enabled").prop("checked",this.checked)});c(document).off("click.yiiGridView",g+":enabled").on("click.yiiGridView",g+":enabled",function(){var k=f.find("input[name='"+i.name+"']").length==f.find("input[name='"+i.name+"']:checked").length;f.find("input[name='"+i.checkAll+"']").prop("checked",k)})},getSelectedRows:function(){var f=c(this);var h=b[f.attr("id")];var g=[];if(h.selectionColumn){f.find("input[name='"+h.selectionColumn+"']:checked").each(function(){g.push(c(this).parent().closest("tr").data("key"))})}return g},destroy:function(){return this.each(function(){c(window).unbind(".yiiGridView");c(this).removeData("yiiGridView")})},data:function(){var f=c(this).attr("id");return b[f]}}})(window.jQuery);