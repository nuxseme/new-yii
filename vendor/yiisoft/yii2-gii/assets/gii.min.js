yii.gii=(function(c){var h=c(".default-view").length>0;var b=function(){c(".hint-block").each(function(){var j=c(this);j.parent().find("label").addClass("help").popover({html:true,trigger:"hover",placement:"right",content:j.html()})})};var e=function(){c(".sticky:not(.error)").find('input[type="text"],select,textarea').each(function(){var j;if(this.tagName==="SELECT"){j=this.options[this.selectedIndex].text}else{if(this.tagName==="TEXTAREA"){j=c(this).html()}else{j=c(this).val()}}if(j===""){j="[empty]"}c(this).before('<div class="sticky-value">'+j+"</div>").hide()});c(".sticky-value").on("click",function(){c(this).hide();c(this).next().show().get(0).focus()})};var a=function(){c(".preview-code, .diff-code, .modal-refresh, .modal-previous, .modal-next").on("click",function(){var k=c("#preview-modal");var j=c(this);k.find(".modal-refresh").attr("href",j.attr("href"));if(j.hasClass("preview-code")||j.hasClass("diff-code")){k.data("action",(j.hasClass("preview-code")?"preview-code":"diff-code"))}k.find(".modal-title").text(j.data("title"));k.find(".modal-body").html("Loading ...");k.modal("show");var m=c("a."+k.data("action")+'[href="'+j.attr("href")+'"]').closest("tr").find("input").get(0);var l=false;if(m){l=m.checked;k.find(".modal-checkbox").removeClass("disabled")}else{k.find(".modal-checkbox").addClass("disabled")}k.find(".modal-checkbox span").toggleClass("glyphicon-check",l).toggleClass("glyphicon-unchecked",!l);c.ajax({type:"POST",cache:false,url:j.prop("href"),data:c(".default-view form").serializeArray(),success:function(r){if(!j.hasClass("modal-refresh")){var s="a."+k.data("action");var q=c(s);var p=q.filter('[href="'+j.attr("href")+'"]').index(s);var o=q.eq(p-1);var n=q.eq((p+1==q.length?0:p+1));k.data("current",q.eq(p));k.find(".modal-previous").attr("href",o.attr("href")).data("title",o.data("title"));k.find(".modal-next").attr("href",n.attr("href")).data("title",n.data("title"))}k.find(".modal-body").html(r);k.find(".content").css("max-height",(c(window).height()-200)+"px")},error:function(n,p,o){k.find(".modal-body").html('<div class="error">'+n.responseText+"</div>")}});return false});c("#preview-modal").on("keydown",function(j){if(j.keyCode===37){c(".modal-previous").trigger("click")}else{if(j.keyCode===39){c(".modal-next").trigger("click")}else{if(j.keyCode===82){c(".modal-refresh").trigger("click")}else{if(j.keyCode===32){c(".modal-checkbox").trigger("click")}}}}});c(".modal-checkbox").on("click",i)};var i=function(){var j=c("#preview-modal");var k=j.data("current").closest("tr").find("input");var l=!k.prop("checked");k.prop("checked",l);j.find(".modal-checkbox span").toggleClass("glyphicon-check",l).toggleClass("glyphicon-unchecked",!l);return false};var g=function(){c("#check-all").prop("checked",!c(".default-view-files table .check input:enabled:not(:checked)").length)};var d=function(){var j=c("#check-all");j.click(function(){c(".default-view-files table .check input:enabled").prop("checked",this.checked)});c(".default-view-files table .check input").click(function(){g()});g()};var f=function(){c("#action-toggle :input").change(function(){c(this).parent("label").toggleClass("active",this.checked);c("."+this.value,".default-view-files table").toggle(this.checked).find(".check input").attr("disabled",!this.checked);g()})};return{autocomplete:function(j,l){var k=new Bloodhound({datumTokenizer:function(m){return Bloodhound.tokenizers.whitespace(m.word)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:l});k.initialize();jQuery(".typeahead-"+j).typeahead(null,{displayKey:"word",source:k.ttAdapter()})},init:function(){b();e();a();d();f();c("#model-generator #generator-tablename").change(function(){var j=(c(this).val().indexOf("*")===-1);c(".field-generator-modelclass").toggle(j);if(c("#generator-generatequery").is(":checked")){c(".field-generator-queryclass").toggle(j)}}).change();c("#model-generator #generator-tablename").on("blur",function(){var k=c(this).val();if(c("#generator-modelclass").val()===""&&k&&k.indexOf("*")===-1){var j="";c.each(k.split("_"),function(){if(this.length>0){j+=this.substring(0,1).toUpperCase()+this.substring(1)}});c("#generator-modelclass").val(j).blur()}});c("#model-generator #generator-modelclass").on("blur",function(){var j=c(this).val();if(j!==""){var k=c("#generator-queryclass").val();if(k===""){k=j+"Query";c("#generator-queryclass").val(k)}}});c("#model-generator #generator-ns").on("blur",function(){var k=c("#model-generator .field-generator-queryns .sticky-value");var j=c("#model-generator #generator-queryns");if(k.is(":visible")||!j.is(":visible")){var l=c(this).val();k.html(l);j.val(l)}});c("form #generator-generatequery").change(function(){c("form .field-generator-queryns").toggle(c(this).is(":checked"));c("form .field-generator-queryclass").toggle(c(this).is(":checked"));c("form .field-generator-querybaseclass").toggle(c(this).is(":checked"))}).change();c("form #generator-enablei18n").change(function(){c("form .field-generator-messagecategory").toggle(c(this).is(":checked"))}).change();c(".default-view .form-group input,select,textarea").change(function(){c(".default-view-results,.default-view-files").hide();c('.default-view button[name="generate"]').hide()});c(".module-form #generator-moduleclass").change(function(){var k=c(this).val().match(/(\w+)\\\w+$/);var j=c("#generator-moduleid");if(k&&k[1]&&j.val()===""){j.val(k[1])}})}}})(jQuery);